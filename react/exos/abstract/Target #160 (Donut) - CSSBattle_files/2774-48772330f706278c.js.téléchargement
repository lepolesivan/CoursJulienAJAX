(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2774],{1942:function(e,t,a){"use strict";a.d(t,{N:function(){return r}});var n=a(2322);function r(){return(0,n.jsxs)("div",{className:"friends-empty",children:[(0,n.jsx)("img",{alt:"Two chibi friends clashing their swords",src:"/images/friends.png"}),(0,n.jsx)("p",{className:"friends-empty__title",children:"Add friends!"}),(0,n.jsx)("p",{className:"friends-empty__desc",children:"Want to see where you stand only among your friends? Visit their profile and add them as friends to see them here!"})]})}},94:function(e,t,a){"use strict";a.d(t,{g:function(){return o}});var n=a(2322),r=a(4987),i=a(3290);function o(e){var t=e.isFriendsMode,a=e.onChange,o=e.fullWidth,s=void 0===o||o;return(0,n.jsx)(r.s,{options:[{label:"Everyone",value:"everyone"},{label:"Friends Only",value:"friends"}],onChange:function(e){a(e),(0,i.q)({name:"friendLeaderboardToggle",label:"friends"===e.target.value})},value:t?"friends":"everyone",fullWidth:s})}},8432:function(e,t,a){"use strict";var n=a(2322),r=a(8724),i=a(4030);t.Z=function(e){var t=e.alignMenuRight,a=e.isCSSLeaderboard,o=e.setIsCSSLeaderboard,s=e.levelId,l=e.battleId,c=e.small,d=void 0===c||c;return(0,i.isNonCssAvailable)({levelId:s,battleId:l})?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.L,{alignRight:t,dropdownBtnClasses:"".concat(d?"dropdown-btn--small":"","  dropdown-btn--leaderboard-switch ").concat(a?"":"dropdown-btn--primary"),dropdownMenuClasses:"dropdown-menu--no-padding dropdown-menu--small",dropdownBtnContent:a?"CSS":"ALL",children:(0,n.jsxs)("div",{style:{minWidth:"22rem"},children:[(0,n.jsxs)("div",{className:"dropdown-selector",onClick:function(){return o(!0)},children:[(0,n.jsx)("span",{className:"small-pill",style:{marginBottom:"0.5rem"},children:"CSS"}),(0,n.jsx)("p",{children:"Leaderboard only includes pure CSS solutions. Great for beginners"})]}),(0,n.jsxs)("div",{className:"dropdown-selector",onClick:function(){return o(!1)},children:[(0,n.jsx)("span",{className:"small-pill small-pill--primary",style:{marginBottom:"0.5rem"},children:"ALL"}),(0,n.jsx)("p",{children:"Leaderboard includes all solutions (SVG-in-CSS, Unicode, and CSS). Great for advanced players"})]})]})})}):null}},8431:function(e,t,a){"use strict";a.d(t,{x:function(){return u}});var n=a(2322),r=a(9604),i=a(5598),o=a(3196),s=a.n(o),l=a(7841),c=a(8329),d=a(3125),u=function(e){var t=e.icon,a=e.showProBadge,o=e.title,u=e.subtitle;return(0,n.jsx)(d.E.div,{className:s().innerPageHeader,initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)(i.VStack,{children:[t?(0,n.jsx)(r.J,{size:"32",marginRight:"0",name:t,color:"var(--clr-brand)"}):null,a?(0,n.jsx)(c.Z,{height:"24"}):null,(0,n.jsx)(l.x,{size:4,weight:"600",mono:!1,tag:"h1",appearance:"primary",children:o}),(0,n.jsx)("div",{style:{maxWidth:"72ch"},children:(0,n.jsx)(l.x,{size:1,weight:"500",mono:!1,tag:"p",letterSpacing:"0.3px",appearance:"secondary",lineHeight:"1.5",align:"center",children:u})})]})})}},4441:function(e,t,a){"use strict";a.d(t,{s:function(){return U}});var n=a(865),r=a(6670),i=a(6383),o=a(930),s=a(2322),l=a(2784),c=a(5632),d=a(7037),u=a(9241),f=a(1251),m=a(2367),p=a(3552),h=a(2220),v=a(94),y=a(1942),x=a(7500),g=a(8688),b=a.n(g),_=a(5598),j=a(7414),C=a(8432),S=a(9411),P=a(4891),k=a.n(P),w=function(e){var t=e.large,a=e.rank,n=e.index;return(0,s.jsxs)("div",{className:"".concat(k().cuboid," ").concat(t?k().cuboidLarge:""),"data-rank":a,"data-index":n,children:[(0,s.jsx)("div",{className:"".concat(k().face," ").concat(k().ft),children:(0,s.jsx)("span",{children:a})}),(0,s.jsx)("div",{className:"".concat(k().face," ").concat(k().bk)}),(0,s.jsx)("div",{className:"".concat(k().face," ").concat(k().rt)}),(0,s.jsx)("div",{className:"".concat(k().face," ").concat(k().lt)}),(0,s.jsx)("div",{className:"".concat(k().face," ").concat(k().bm)}),(0,s.jsx)("div",{className:"".concat(k().face," ").concat(k().tp)})]})},I=function(e){var t=e.children;return(0,s.jsx)("div",{className:k().scene3d,children:t})},N=a(4987),L=a(9604),T=a(8724),E=a(3125),R=a(5239),D="global",z="streak",B="battle",M="target";function F(e){return(null===e||void 0===e?void 0:e.length)>5}var U=function(){var e=function(e){var t;if(V(null),Z(null),(t=e.target.value).match(/target/)){var n=t.split("/")[1];Z(n)}else if(t.match(/battle/)){var r=t.split("/")[1];V(r)}Q([]),U(t),a.push("/leaderboard/".concat(t))},t=function(e){if(e===D)return"All time";if(e.match("battle")){if((0,x.checkIfCustomBattle)({id:H}))return"";H=parseInt(H,10);var t=x.battles.filter((function(e){return e.id===H}))[0];return"Battle #".concat(H," - ").concat(t.name)}if(e.match("target")){if(F(W))return"";var a=parseInt(W,10),n=b().filter((function(e){return e.id===a}))[0];return"Target #".concat(W," - ").concat(n.name)}},a=(0,c.useRouter)(),g=(0,l.useContext)(p.S),P=100,k=(0,j.P)(),w=(0,l.useState)(""),L=w[0],U=w[1],A=(0,l.useState)(),W=A[0],Z=A[1],q=(0,l.useState)(),H=q[0],V=q[1];(0,l.useEffect)((function(){if(a.isReady){var e=a.query,t=e.type,n=e.id;t===B?(U("battle/".concat(n)),V(n)):t===M?(U("target/".concat(n)),Z(n)):U(t===z?"streak":D)}}),[a.isReady]);var Y=(0,l.useState)(),J=(Y[0],Y[1]);(0,l.useEffect)((function(){(0,d.pc)().then(J)}),[]);var $=(0,l.useState)([]),G=$[0],Q=$[1],K=(0,l.useState)(),X=K[0],ee=K[1],te=(0,l.useState)({}),ae=te[0],ne=te[1],re=(0,i.Z)((0,h._)("showFriendsLeaderboard",!!g),2),ie=re[0],oe=re[1],se=(0,i.Z)((0,S.L)({levelId:W,battleId:H}),2),le=se[0],ce=se[1],de=((0,l.useRef)(),(0,l.useRef)(),(0,l.useState)(3)),ue=de[0],fe=de[1];return(0,l.useEffect)((function(){(window.localStorage.debug,L)&&(ee(!0),ne({}),Q([]),fe(3),function(){if(L===D)return ie?(0,d.uf)({userId:g.uid}):(0,d.bQ)(P);if(L.match("battle")){var e=H;return(0,x.checkIfCustomBattle)({id:H})||(e=parseInt(H,10)),ie?(0,d.eL)({userId:g.uid,battleId:e,numberOfPlayers:P,isCSSLeaderboard:le}):(0,d.uL)({battleId:e,numberOfPlayers:P,isCSSLeaderboard:le})}if(L.match("target")){var t=W;return F(W)||(t=parseInt(W,10)),ie?(0,d.UZ)({userId:g.uid,levelId:t,numberOfPlayers:P,isCSSLeaderboard:le}):(0,d.R6)({levelId:t,numberOfPlayers:P,isCSSLeaderboard:le})}return L===z?(0,d.Pu)():void 0}().then((function(e){e=e.filter((function(e){return e.playerProfile})),le||L===D||e.map((function(e){var t,a,n;e.score=null===(t=e.overall)||void 0===t?void 0:t.score,e.codeSize=null===(a=e.overall)||void 0===a?void 0:a.codeSize,e.lastUpdated=null===(n=e.overall)||void 0===n?void 0:n.lastUpdated})),L===z&&(e.map((function(e){e.score="".concat(e.streak.count," days")})),fe((0,m.Ti)(e))),Q(e),ee(!1),g&&e.length&&(e.find((function(e){return e.playerProfile.id===g.uid}))?(ne({rank:e.findIndex((function(e){return e.playerProfile.id===g.uid}))+1}),(0,m.lC)(2)):L.match("target")||L===z||(0,d.r8)({userId:g.uid,battleId:"battle"===a.query.type?a.query.id:void 0,levelId:"target"===a.query.type?a.query.id:void 0}).then((function(t){ne(t),Q((0,o.Z)(e).concat([{score:t.score,playerProfile:(0,r.Z)((0,n.Z)({},g),{avatar:g.photoURL}),id:g.uid,rank:t.rank,playedCount:t.playedCount}]))})).catch((function(e){console.log("failed to fetch rank")})))})))}),[g?g.uid:"",ie,L,le]),(0,s.jsxs)(_.VStack,{children:[(0,s.jsx)("div",{style:{flexShrink:0},children:(0,s.jsxs)(_.VStack,{gap:"1rem",children:[L?(0,s.jsx)(E.E.div,{initial:{y:-10,opacity:0},exit:{y:-10,opacity:0},animate:{y:0,opacity:1,transition:{delay:.1}},children:(0,s.jsx)(N.s,{primary:!0,value:L,onChange:e,options:[{label:"All-time",value:D},{label:"Streak",value:z}],customOptions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.O,{defaultChecked:L.match(B),selected:L.match(B),primary:!0,children:(0,s.jsx)(T.L,{dropdownBtnClasses:"dropdown-btn--minimal",dropdownMenuClasses:"dropdown-menu--scrollable",dropdownBtnContent:L.match(B)?t(B):"Battle",children:x.battles.slice().reverse().map((function(t){return(0,s.jsxs)("button",{tabIndex:1,className:"dropdown-menu__item",onClick:function(){e({target:{value:"battle/".concat(t.id)}})},children:[(0,s.jsx)(f.bN,{id:t.id})," - ",t.name]},t.id)}))})},B),(0,s.jsx)(N.O,{defaultChecked:L.match(M),selected:L.match(M),primary:!0,children:(0,s.jsx)(T.L,{dropdownBtnClasses:"dropdown-btn--minimal",dropdownMenuClasses:"dropdown-menu--scrollable",dropdownBtnContent:L.match(M)?t(M):"Target",children:b().slice().reverse().map((function(t){return(0,s.jsxs)("button",{tabIndex:1,className:"dropdown-menu__item",onClick:function(){e({target:{value:"target/".concat(t.id)}})},children:[(0,s.jsx)(f.bN,{id:t.id})," - ",t.name]},t.id)}))})},M)]})})}):null,(0,s.jsxs)(_.HStack,{gap:"0.25rem",children:[g&&k&&(0,s.jsx)(E.E.div,{layout:!0,initial:{y:-10,opacity:0},exit:{y:-10,opacity:0},animate:{y:0,opacity:1,transition:{delay:.3}},children:(0,s.jsx)(v.g,{isFriendsMode:ie,onChange:function(e){oe("friends"===e.target.value)},fullWidth:!1})}),W||H?(0,s.jsx)(E.E.div,{layout:!0,initial:{y:-10,opacity:0},exit:{y:-10,opacity:0},animate:{y:0,opacity:1,transition:{delay:.5}},children:(0,s.jsx)(C.Z,{alignMenuRight:!0,isCSSLeaderboard:le,setIsCSSLeaderboard:ce,small:!1,levelId:!W||F(W)?W:parseInt(W,10),battleId:!H||(0,x.checkIfCustomBattle)({id:H})?H:parseInt(H,10)})}):null]})]})}),(0,s.jsxs)("div",{children:[X?(0,s.jsx)(E.E.div,{className:"ta-c",initial:{opacity:0},animate:{opacity:1,transition:{delay:.3}},children:(0,s.jsx)(u.R,{children:"Loading up some awesome players..."})}):null,ie&&!X&&!G.length&&(0,s.jsx)(y.N,{}),(0,s.jsx)(R.M,{children:!!ue&&!!(null===G||void 0===G?void 0:G.length)&&(0,s.jsx)(E.E.div,{className:"leaderboard-leaders",initial:{y:-40,opacity:0},exit:{y:-10,opacity:0},animate:{y:0,opacity:1,transition:{type:"spring"}},children:(0,s.jsx)(I,{children:G.slice(0,ue).map((function(e,t){return(0,s.jsx)(O,{data:e,index:t},t)}))})})}),"streak"!==L&&0===ae.rank&&(0,s.jsxs)("p",{className:"section-helper section-helper--no-score",children:["Play at least ","global"===L?2:1," targets to see your rank."]}),(0,s.jsx)(_.HStack,{justify:"center",children:(0,s.jsx)("table",{className:"leaderboard-table",style:{position:"relative",zIndex:1},children:(0,s.jsx)("tbody",{children:G.slice(ue).map((function(e,t){return(0,s.jsxs)("tr",{className:"leaderboar__user  leaderboard__user--".concat(e.rank),children:[(0,s.jsx)("td",{"data-column":"Player Details",children:(0,s.jsxs)(_.HStack,{align:"center",children:[(0,s.jsx)(f.qE,{small:!0,size:"32",url:e.playerProfile.avatar,username:e.playerProfile.username,isPro:e.playerProfile.isPro,userId:e.playerProfile.id,className:"leaderboard__user-avatar"}),(0,s.jsx)(f.Rj,{name:e.playerProfile.displayName,username:e.playerProfile.username,userId:e.playerProfile.id,className:"leaderboard__user-name",ellipsis:!0})]})}),"streak"==L?(0,s.jsx)("td",{"data-column":"Streaks",children:e.score}):(0,s.jsx)("td",{"data-column":"Score",children:e.score.toFixed(2)}),"streak"!==L?(0,s.jsxs)("td",{"data-column":"Meta",children:[e.playedCount?"(".concat(e.playedCount," Target").concat(e.playedCount>1?"s":"",")"):"",e.codeSize?"{".concat(e.codeSize,"}"):""]}):null,(0,s.jsx)("td",{"data-column":"Rank",children:(0,m.x4)(e.rank||t+4,2)})]},t)}))})})})]})]})},O=function(e){var t,a=e.data,n=e.index;return(0,s.jsxs)("div",{className:"leader leader-3d",children:[(0,s.jsx)("div",{className:"leader__info",children:(0,s.jsx)("div",{className:"leader__info__".concat(n+1),children:(0,s.jsxs)(_.VStack,{gap:"1rem",children:[(0,s.jsx)(L.J,{name:"crown",size:"1em",color:["var(--clr-gold-crown)","var(--clr-silver-crown)","var(--clr-bronze-crown)"][n],marginRight:"0"}),(0,s.jsx)("div",{className:"leader-avatar  leader-avatar__".concat(n+1),children:(0,s.jsx)(f.qE,{size:"50",url:a.playerProfile.avatar,username:a.playerProfile.username,userId:a.playerProfile.id,isPro:a.playerProfile.isPro,className:"leader__avatar"})}),(0,s.jsxs)(_.VStack,{gap:"0.3rem",children:[(0,s.jsx)("div",{className:"leader__name",children:(0,s.jsx)(f.Rj,{name:a.playerProfile.displayName,username:a.playerProfile.username,userId:a.playerProfile.id,className:""})}),(0,s.jsxs)("p",{className:"leader__score",children:[(null===(t=a.score)||void 0===t?void 0:t.toFixed)?a.score.toFixed(2):a.score," "]}),a.codeSize?(0,s.jsx)("p",{children:(0,s.jsxs)("span",{className:"leader__meta",children:[a.playedCount?"(".concat(a.playedCount," Target").concat(a.playedCount>1?"s":"",")"):"",a.codeSize?"{".concat(a.codeSize,"}"):""]})}):null]})]})})}),(0,s.jsx)(w,{large:n+1===1,rank:a.rank||n+1,index:n+1})]})}},4987:function(e,t,a){"use strict";a.d(t,{O:function(){return l},s:function(){return c}});var n=a(2322),r=a(3125),i=a(2784),o=a(9721),s=a.n(o),l=function(e){var t=e.onChange,a=e.defaultChecked,i=e.selected,o=e.value,l=e.primary,c=e.highlightId,d=e.children;return(0,n.jsxs)("label",{className:"".concat(s().radioTabBtn," ").concat(l&&s().radioTabBtnPrimary),children:[(0,n.jsx)("input",{type:"radio",name:"tab",value:o,defaultChecked:a,onChange:t}),i?(0,n.jsx)(r.E.div,{layoutId:c,className:"".concat(s().activeIndicator," ").concat(l&&s().activeIndicatorPrimary)}):null,(0,n.jsx)("div",{style:{position:"relative",color:i?"var(--clr-link)":"var(--clr-text)"},children:d})]})},c=function(e){var t=e.options,a=e.customOptions,r=e.onChange,o=e.value,c=e.fullWidth,d=void 0!==c&&c,u=e.primary,f=void 0!==u&&u,m=(0,i.useId)();return(0,n.jsxs)("div",{className:"".concat(s().radioTabs," ").concat(d&&s().radioTabsFullWidth," ").concat(f&&s().radioTabsPrimary),children:[t.map((function(e,t){return(0,n.jsx)(l,{defaultChecked:o===e.value,onChange:r,value:e.value,selected:o===e.value,primary:f,highlightId:m,children:e.label},e.value)})),a]})}},9411:function(e,t,a){"use strict";a.d(t,{L:function(){return o}});var n=a(6383),r=a(4030),i=a(2220);function o(e){var t=e.levelId,a=e.battleId,o=(0,n.Z)((0,i._)("showCSSLeaderboard",!0),2),s=o[0],l=o[1];return(0,r.isNonCssAvailable)({levelId:t,battleId:a})?[s,l]:[!0,function(){}]}},2220:function(e,t,a){"use strict";a.d(t,{_:function(){return i}});var n=a(2838),r=a(2784);function i(e,t){var a=(0,r.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),i=a[0],o=a[1];return[i,function(t){try{var a=(0,n.Z)(t,Function)?t(i):t;o(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(r){console.log(r)}}]}},3196:function(e){e.exports={innerPageHeader:"InnerPageHeader_innerPageHeader__HSMOC"}},4891:function(e){e.exports={scene3d:"LeaderboardPodium_scene3d__sG58k",cuboid:"LeaderboardPodium_cuboid__qJQk7",cuboidLarge:"LeaderboardPodium_cuboidLarge__Q8CJE",face:"LeaderboardPodium_face__oto6T",ft:"LeaderboardPodium_ft__jiOdc",bk:"LeaderboardPodium_bk__hlkTr",rt:"LeaderboardPodium_rt__OQK5b",lt:"LeaderboardPodium_lt__tj4WS",tp:"LeaderboardPodium_tp__9IFLM",bm:"LeaderboardPodium_bm__yNrza"}},9721:function(e){e.exports={radioTabs:"RadioTabs_radioTabs__d9zDK",radioTabsFullWidth:"RadioTabs_radioTabsFullWidth__oq2fN",radioTabsPrimary:"RadioTabs_radioTabsPrimary__igl35",radioTabBtn:"RadioTabs_radioTabBtn__aLbrp",radioTabBtnPrimary:"RadioTabs_radioTabBtnPrimary__Nyq78",activeIndicator:"RadioTabs_activeIndicator___CbYq",activeIndicatorPrimary:"RadioTabs_activeIndicatorPrimary__8jTez"}},4030:function(e){function t(e){return"string"===typeof e?new Date(e):e.toDate?e.toDate():new Date(1e3*(e.seconds||e._seconds))}function a(e,t){try{return e.toLocaleString("en-US",{timeZone:t})}catch(a){return e.toLocaleString("en-US",{timeZone:"America/New_York"})}}e.exports={isNonCssAvailable:function({levelId:e,battleId:t}){return e?e>=141:t?t>22:void 0},NON_CSS_START_LEVEL_ID:141,normalizeDate:t,isSameDate:function(e,t,n){if(!e||!t)return!1;const r=new Date(a(e.toDate?e.toDate():e,n)),i=new Date(a(t.toDate?t.toDate():t,n));return r.getDate()===i.getDate()&&r.getMonth()===i.getMonth()&&r.getFullYear()===i.getFullYear()},isTodaysDailyTarget:function(e){if(!e.startDate)return!1;const t=e.startDate.toDate(),a=new Date;return t.getUTCDate()===a.getUTCDate()&&t.getUTCMonth()===a.getUTCMonth()&&t.getUTCFullYear()===a.getUTCFullYear()},isYesterdaysDailyTarget:function(e){if(!e.startDate)return!1;const t=e.startDate.toDate(),a=new Date;return a.setDate(a.getDate()-1),t.getUTCDate()===a.getUTCDate()&&t.getUTCMonth()===a.getUTCMonth()&&t.getUTCFullYear()===a.getUTCFullYear()},getTomorrowDate:function(){var e=new Date;return e.setUTCHours(24,0,0,0),t(e)},getLocaleDate:a}},5239:function(e,t,a){"use strict";a.d(t,{M:function(){return v}});var n=a(2784),r=a(1816),i=a(3617);function o(){const e=(0,n.useRef)(!1);return(0,i.L)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}var s=a(7967),l=a(3105);class c extends n.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:t}){const a=(0,n.useId)(),r=(0,n.useRef)(null),i=(0,n.useRef)({width:0,height:0,top:0,left:0});return(0,n.useInsertionEffect)((()=>{const{width:e,height:n,top:o,left:s}=i.current;if(t||!r.current||!e||!n)return;r.current.dataset.motionPopId=a;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${a}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${n}px !important;\n            top: ${o}px !important;\n            left: ${s}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[t]),n.createElement(c,{isPresent:t,childRef:r,sizeRef:i},n.cloneElement(e,{ref:r}))}const u=({children:e,initial:t,isPresent:a,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:c})=>{const u=(0,l.h)(f),m=(0,n.useId)(),p=(0,n.useMemo)((()=>({id:m,initial:t,isPresent:a,custom:i,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;r&&r()},register:e=>(u.set(e,!1),()=>u.delete(e))})),o?void 0:[a]);return(0,n.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[a]),n.useEffect((()=>{!a&&!u.size&&r&&r()}),[a]),"popLayout"===c&&(e=n.createElement(d,{isPresent:a},e)),n.createElement(s.O.Provider,{value:p},e)};function f(){return new Map}var m=a(3422);var p=a(7035);const h=e=>e.key||"";const v=({children:e,custom:t,initial:a=!0,onExitComplete:s,exitBeforeEnter:l,presenceAffectsLayout:c=!0,mode:d="sync"})=>{(0,p.k)(!l,"Replace exitBeforeEnter with mode='wait'");const f=(0,n.useContext)(m.p).forceRender||function(){const e=o(),[t,a]=(0,n.useState)(0),i=(0,n.useCallback)((()=>{e.current&&a(t+1)}),[t]);return[(0,n.useCallback)((()=>r.Wi.postRender(i)),[i]),t]}()[0],v=o(),y=function(e){const t=[];return n.Children.forEach(e,(e=>{(0,n.isValidElement)(e)&&t.push(e)})),t}(e);let x=y;const g=(0,n.useRef)(new Map).current,b=(0,n.useRef)(x),_=(0,n.useRef)(new Map).current,j=(0,n.useRef)(!0);var C;if((0,i.L)((()=>{j.current=!1,function(e,t){e.forEach((e=>{const a=h(e);t.set(a,e)}))}(y,_),b.current=x})),C=()=>{j.current=!0,_.clear(),g.clear()},(0,n.useEffect)((()=>()=>C()),[]),j.current)return n.createElement(n.Fragment,null,x.map((e=>n.createElement(u,{key:h(e),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:c,mode:d},e))));x=[...x];const S=b.current.map(h),P=y.map(h),k=S.length;for(let n=0;n<k;n++){const e=S[n];-1!==P.indexOf(e)||g.has(e)||g.set(e,void 0)}return"wait"===d&&g.size&&(x=[]),g.forEach(((e,a)=>{if(-1!==P.indexOf(a))return;const r=_.get(a);if(!r)return;const i=S.indexOf(a);let o=e;if(!o){const e=()=>{_.delete(a),g.delete(a);const e=b.current.findIndex((e=>e.key===a));if(b.current.splice(e,1),!g.size){if(b.current=y,!1===v.current)return;f(),s&&s()}};o=n.createElement(u,{key:h(r),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:c,mode:d},r),g.set(a,o)}x.splice(i,0,o)})),x=x.map((e=>{const t=e.key;return g.has(t)?e:n.createElement(u,{key:h(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)})),n.createElement(n.Fragment,null,g.size?x:x.map((e=>(0,n.cloneElement)(e))))}}}]);
//# sourceMappingURL=2774-48772330f706278c.js.map