"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3638],{4807:function(e,t,a){a.d(t,{E:function(){return N},i:function(){return v}});var i=a(865),s=a(6670),r=a(2322),n=a(9097),l=a.n(n),c=a(2784),d=a(7037),o=a(3552),h=a(1251),g=a(1551),u=a(4030),m=a(7500),p=a(5598),x=a(7841),f=a(9604),j=a(9376);function y(e){var t,a=e.data,i=e.playerData,s=void 0===i?{}:i,n=e.stats,d=e.unlockDate,u=e.gameMode,m=(0,c.useContext)(o.S),f=(0,c.useState)(!a.id),y=f[0],v=f[1];(0,c.useEffect)((function(){v(!a.id)}),[a.id]),a.image=y?a.isOpen?"/targets/0-open.png":"/targets/0.png?v=2":a.image;var N=null===(t=a.image)||void 0===t?void 0:t.replace(/\.png/,"@2x.png");return(0,r.jsxs)("div",{className:"target-tile ".concat(a.id?"":"target-tile--dummy"," ").concat(a.isOpen?"target-tile--public":""," ").concat(n&&n.highscore.playerProfile.userId===(null===m||void 0===m?void 0:m.uid)&&"target-tile--glowing"),children:[(0,r.jsxs)("div",{className:"target-top-info",children:[a.id?(0,r.jsx)("p",{className:"target-top-info__pill",children:a.id.length>5&&a.name||"#".concat(a.id)}):null,a.isOpen?(0,r.jsx)("p",{className:"target-top-info__pill",children:(0,r.jsx)("img",{alt:"",src:"/images/open-book.svg"})}):null]}),(0,r.jsxs)(p.VStack,{gap:"1rem",align:"stretch",expand:!0,children:[a.id&&(0,r.jsx)(l(),{href:"/play/".concat(a.id),children:(0,r.jsx)("a",{className:"shadow-link",title:"Play target number ".concat(a.id)})}),a.id?(0,r.jsx)("img",{src:a.image,srcSet:"".concat(N," 2x"),alt:"",loading:"lazy",className:"target-tile__image"}):(0,r.jsx)(j.d,{opacity:"0.01",children:(0,r.jsx)("img",{src:"/images/lock.svg",height:"50",style:{opacity:.75}})}),(0,r.jsx)("div",{style:{flex:1},children:(0,r.jsxs)(p.VStack,{gap:"0",align:"stretch",justify:"space-around",expand:!0,children:[n&&"firstToMatch"!==u?(0,r.jsx)("div",{children:(0,r.jsxs)(p.VStack,{gap:"1rem",children:[(0,r.jsx)(h.qE,{small:!0,size:"40",url:n.highscore.playerProfile.avatar,userId:n.highscore.playerProfile.userId,isPro:n.highscore.playerProfile.isPro,username:n.highscore.playerProfile.username,className:"target-highscore__avatar"}),(0,r.jsxs)(p.VStack,{gap:"0.4rem",children:[(0,r.jsx)(h.Rj,{name:n.highscore.playerProfile.displayName,username:n.highscore.playerProfile.username,userId:n.highscore.playerProfile.userId,ellipsis:!0,rank:1}),(0,r.jsxs)("p",{className:"target-highscore__score",children:[n.highscore.score," ","firstToMatch"!==u?(0,r.jsxs)("span",{children:["{",n.highscore.codeSize,"}"]}):null]})]})]})}):null,!n&&!y&&(0,r.jsx)("div",{children:(0,r.jsxs)(p.VStack,{gap:"0.25rem",children:[(0,r.jsx)(x.x,{mono:!1,size:4,weight:500,appearance:"tertiary",children:"\ud83d\ude2d"}),(0,r.jsx)(x.x,{mono:!1,size:1,weight:500,appearance:"secondary",children:"No highscore yet"}),(0,r.jsx)(x.x,{mono:!1,size:0,weight:500,appearance:"tertiary",children:"Be the first?"})]})}),y&&d?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"daily-target-text",style:{padding:"1rem 1rem 0.5rem"},children:[(0,r.jsx)("p",{className:"daily-target-text__title",style:{textAlign:"center"},children:"Unlocks in"}),(0,r.jsx)("div",{style:{marginTop:"1rem"},children:(0,r.jsx)(g.W,{showEmoji:!1,suffix:"",date:d,size:"0.1",showUnits:!0,maxLength:2,justify:"center"})})]})}):null,m&&!y&&(0,r.jsx)("div",{style:{marginTop:"1rem"},children:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"target-attempts",children:(0,r.jsx)("p",{className:"target-attempts__item  target-attempts__item--score ".concat(!s.score&&"target-attempts__item--not-played"),children:n&&n.highscore.playerProfile.userId===(null===m||void 0===m?void 0:m.uid)?(0,r.jsx)("span",{children:"That's you!"}):s.score?(0,r.jsxs)("span",{children:["You - ",s.score," ","firstToMatch"!==u?(0,r.jsxs)("span",{children:["{",s.codeSize||"-","}"]}):null]}):(0,r.jsx)("span",{children:"You - Not played"})})})})})]})}),a.isOpen?(0,r.jsx)("div",{className:"public-target-message",children:(0,r.jsxs)("p",{children:['This is an "Open" Target. Open Targets have all the top solutions public.'," ",(0,r.jsx)("a",{className:"link",href:"/blog/introducing-open-targets/",children:"Learn More"})]})}):null]})]})}function v(e){var t,a=e.target,i=e.showTags,s=e.data,n=e.children;a.image=h?a.isOpen?"/targets/0-open.png":"/targets/0.png?v=2":a.image;var d=null===(t=a.image)||void 0===t?void 0:t.replace(/\.png/,"@2x.png"),o=(0,c.useState)(!a.id),h=o[0],g=o[1];return(0,c.useEffect)((function(){g(!a.id)}),[a.id]),(0,r.jsxs)("div",{className:"target-tile--daily  target-tile ".concat(a.id?"":"target-tile--dummy"," ").concat(a.isOpen?"target-tile--public":""),children:[a.id&&"dummy"!==a.id&&(0,r.jsx)(l(),{href:"/play/".concat(a.id),children:(0,r.jsx)("a",{className:"shadow-link",title:"Play target number ".concat(a.id)})}),"dummy"===a.id?(0,r.jsx)(j.d,{children:(0,r.jsx)("img",{src:"/images/lock.svg",height:"50",style:{opacity:.75}})}):(0,r.jsx)("img",{src:a.image,srcSet:"".concat(d," 2x"),alt:"",loading:"lazy",className:"target-tile__image"}),i&&(0,r.jsx)("div",{className:"target-tile__info",children:(0,r.jsx)("div",{className:"target-top-info",children:a?(0,r.jsxs)("p",{className:"target-top-info__pill",children:[s?(0,r.jsx)(f.J,{name:"tick",size:"1em",color:"white"}):null," ",a.formattedDate]}):null})}),n]})}function N(e){var t=(0,c.useState)(),a=t[0],n=t[1],l=(0,c.useState)(),o=l[0],h=l[1],g=e.gameMode;return(0,c.useEffect)((function(){if(n(),h(),e.data.id){var t=e.data.id;return(0,d.GT)(e.data.id).then((function(a){t===e.data.id&&n(a)})),function(){t=null}}}),[e.data.id]),(0,c.useEffect)((function(){var t=g===m.BattleGameModes.FIRST_TO_MATCH?0:Math.floor(e.index/2);if(e.battleStartDate){var a=(0,u.normalizeDate)(e.battleStartDate);a.setDate(a.getDate()+7*t),h(a)}}),[e.data.id]),(0,r.jsx)(y,(0,s.Z)((0,i.Z)({},e),{stats:a,unlockDate:o,gameMode:g}))}},2173:function(e,t,a){a.d(t,{c:function(){return j}});var i=a(2322),s=a(9097),r=a.n(s),n=a(2784),l=a(7037),c=a(5598),d=a(4807),o=(a(9241),a(9604)),h=a(4030),g=a(1551),u=a(1893),m=function(e){var t=e.width;return(0,i.jsx)("div",{className:"skeleton",style:{width:t}})},p=a(8329),x=a(2367),f=a(3552),j=function(e){var t=e.target,a=e.showDateInside,s=(0,u.a)(),j=(0,n.useState)(!1),y=j[0],v=j[1],N=(0,n.useState)(),_=N[0],b=N[1],k=(0,n.useState)(""),S=k[0],T=k[1],w=(0,n.useContext)(f.k).streakCount;(0,n.useEffect)((function(){_&&t&&T((0,x.qA)({score:_.score,codeSize:_.codeSize,levelId:t.id,isDaily:!0,date:t.formattedDate,streak:w}))}),[t,_]),(0,n.useEffect)((function(){"dummy"!==t.id&&(null===s||void 0===s?void 0:s.uid)&&(v(!0),(0,l.A9)({playerId:s.uid,levelId:t.id}).then((function(e){b(e)})).finally((function(){v(!1)})))}),[null===t||void 0===t?void 0:t.id,null===s||void 0===s?void 0:s.uid]);var D=(0,h.isTodaysDailyTarget)(t),z=(0,h.isYesterdaysDailyTarget)(t);return(0,i.jsxs)(c.VStack,{gap:"1rem",children:[!a&&(0,i.jsxs)("div",{className:"pill ".concat(_?"pill--success":""," "),children:[_?(0,i.jsx)(o.J,{name:"tick",size:"1em",color:"white"}):null," ",t.formattedDate,D?" (Today) ":""]}),(0,i.jsx)("div",{className:D?"target-today":"",children:(0,i.jsx)(d.i,{target:t,data:_,showTags:a,children:(0,i.jsx)("div",{style:{padding:"1rem 1rem 0.5rem"},children:"dummy"!==t.id?(0,i.jsxs)(c.HStack,{justify:"space-between",children:[(0,i.jsx)("div",{className:"daily-target-text",children:(0,i.jsxs)(c.VStack,{gap:"0",align:"flex-start",children:[(0,i.jsx)("p",{className:"daily-target-text__title",children:"Your hi-score"}),(0,i.jsx)("div",{className:"daily-target-text__score",children:y?(0,i.jsx)(m,{width:"6ch"}):_?"".concat(_.score," {").concat(_.codeSize,"}"):"Not played"})]})}),(0,i.jsxs)(c.HStack,{extend:!0,gap:"0.5rem",children:[D&&_?(0,i.jsx)("a",{href:"https://twitter.com/share?url=https://cssbattle.dev/play/".concat(null===t||void 0===t?void 0:t.id,"&text=").concat(S,"&hashtags=CSSBattleChallenge&via=css_battle&related=css_battle"),target:"_blank",rel:"external noopener noreferrer",className:"button button--circular",children:(0,i.jsx)(o.J,{name:"twitter",color:"var(--clr-text-light)",marginRight:"0",size:"20"})}):null,z&&!(null===s||void 0===s?void 0:s.isPro)?(0,i.jsx)(r(),{href:{pathname:"/play/".concat(t.id),query:{openTopSolutions:!0}},children:(0,i.jsx)("a",{className:(0,h.isTodaysDailyTarget)(t)?"button--primary button button--circular":"button button--circular",children:(0,i.jsx)(o.J,{name:"open-book",color:(0,h.isTodaysDailyTarget)(t)?"var(--clr-btn-text)":"var(--clr-text-light)",marginRight:"0",size:"20"})})}):D||(null===s||void 0===s?void 0:s.isPro)?(0,i.jsx)(r(),{href:"/play/".concat(t.id),children:(0,i.jsx)("a",{className:(0,h.isTodaysDailyTarget)(t)?"button--primary button button--circular":"button button--circular",children:(0,i.jsx)(o.J,{name:"play",color:(0,h.isTodaysDailyTarget)(t)?"var(--clr-btn-text)":"var(--clr-text-light)",marginRight:"0",size:"20"})})}):(0,i.jsx)(p.Z,{})]})]}):(0,i.jsxs)("div",{className:"daily-target-text",children:[(0,i.jsx)("p",{className:"daily-target-text__title",style:{textAlign:"center"},children:"Unlocks in"}),(0,i.jsx)("div",{style:{marginTop:"0.5rem"},children:(0,i.jsx)(g.W,{showEmoji:!1,suffix:"",date:1e3*t.date,size:"0.1",showUnits:!1})})]})})})})]})}},3638:function(e,t,a){a.d(t,{J:function(){return h}});var i=a(2322),s=a(2784),r=a(7037),n=a(5416),l=a(5598),c=a(9241),d=a(2173),o=a(2367),h=function(e){var t=e.showFreeOnly,a=(0,s.useState)(),h=a[0],g=a[1];return(0,s.useEffect)((function(){(0,r.rz)(6).then((function(e){var a=e.slice();a.forEach((function(e,t){e.formattedDate=(0,o.dQ)(e.startDate)})),t&&(a=a.slice(0,2));var i=+new Date(a[0].startDate.seconds)+86400;a.reverse().push({id:"dummy",image:"/targets/0.png?v=2",formattedDate:"Tomorrow",date:i}),g(a)}))}),[]),(0,s.useEffect)((function(){var e=document.querySelector(".target-today");e&&e.scrollIntoView({inline:"center",block:"nearest"})}),[h]),(0,i.jsxs)(n.s,{padding:"0",topFocus:t,children:[(0,i.jsx)("div",{style:{padding:"2rem"},className:"home-daily-target-panel no-scrollbar",children:h?(0,i.jsx)(l.HStack,{gap:"2rem",align:"flex-start",justify:t?"center":"flex-start",children:h.map((function(e,a){return(0,i.jsx)("div",{style:{paddingLeft:0!=a||t?0:"10%",paddingRight:"dummy"!=e.id||t?0:"40%"},children:(0,i.jsx)(d.c,{target:e})},e.id)}))}):(0,i.jsx)(c.R,{children:"Fetching Daily targets..."})}),(0,i.jsx)("div",{className:"".concat(!t&&"daily-targets-shadowed")})]})}}}]);
//# sourceMappingURL=3638-8458d944213ca1a7.js.map